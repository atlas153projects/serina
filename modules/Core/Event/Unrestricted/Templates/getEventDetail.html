{% extends 'Unrestricted.html' %}

{% block head %}
<title>{{ collection[0].getName() }}</title>
<meta name='description' content="{{ collection[0].getName() }}" />
<script src="/jquery/jquery-2.0.3.min.js" type="text/javascript"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAfuFD28VOdTEGDuASvI27nAZEKomFys38&libraries=geometry&sensor=true" type="text/javascript"></script>
<script src="/event/js/cartographer.js" type="text/javascript"></script>
<script type="text/javascript">
	$(function() {
		$('#map').cartographer({
			bounds: {{ collection[0].getWaypoints().getAllBounds().jsonEncode() | raw }},
			polyfills: {{ collection[0].getWaypoints().getAllEncodedPolyfills().jsonEncode() | raw }}
		});
	});
</script>
{% endblock %}

{% block content %}
<div id="map" style="width:800px;height:800px"></div>
<h1>{{ collection[0].getName() }}</h1>
<ul>
	<li>Starts: {{ collection[0].getStartDateTime() }}</li>
	<li>Ends: {{ collection[0].getEndDateTime() }}</li>
</ul>

<div>
	<p>
		{{ collection[0].getDescription() }}
	</p>
</div>

<ul>
	{% for currentWaypoint in collection[0].getWaypoints() %}
	<li>{{ currentWaypoint.latitude }} / {{ currentWaypoint.longitude }}</li>
	{% endfor %}
</ul>

<ul>
	{% for currentAttendee in collection[0].getAttendees() %}
	<li>{{ currentAttendee.lastname }}, {{ currentAttendee.firstname }}</li>
	{% endfor %}
</ul>

<ul>
	{% for currentLeader in collection[0].getLeaders() %}
	<li>{{ currentLeader.lastname }}, {{ currentLeader.firstname }}</li>
	{% endfor %}
</ul>
{% endblock %}